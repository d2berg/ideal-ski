(function(e){function t(t){for(var n,c,i=t[0],u=t[1],o=t[2],l=0,f=[];l<i.length;l++)c=i[l],a[c]&&f.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);d&&d(t);while(f.length)f.shift()();return s.push.apply(s,o||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==a[u]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},s=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var d=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"366c":function(e,t,r){"use strict";var n=r("c23b"),a=r.n(n);a.a},4678:function(e,t,r){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=s(e);return r(t)}function s(e){var t=n[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="4678"},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-app",{attrs:{id:"app"}},[r("v-toolbar",[r("v-btn",{attrs:{color:"primary",fab:"",small:"",dark:""},on:{click:function(t){t.stopPropagation(),e.editDialog=!0}}},[r("v-icon",[e._v("edit")])],1),r("v-toolbar-title",[e._v("Idealski")]),r("v-spacer"),r("v-text-field",{on:{change:e.setCachedRace},model:{value:e.selectedRace.name,callback:function(t){e.$set(e.selectedRace,"name",t)},expression:"selectedRace.name"}}),r("v-spacer"),r("v-toolbar-title",[e._v(e._s(e.formatDate))])],1),r("router-view",{attrs:{racingSkiers:e.selectedRace.skiers},on:{saveState:e.saveCache,removeSkier:e.removeSkier}}),r("v-dialog",{attrs:{"max-width":"800px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Race settings")])]),r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("table",[r("thead",[r("tr",[r("th",{attrs:{colspan:"4"}},[e._v("\n                      Add skiers\n                    ")])])]),r("tbody",[r("tr",[r("td",[r("v-text-field",{model:{value:e.startNumber,callback:function(t){e.startNumber=t},expression:"startNumber"}})],1),r("td",[r("v-combobox",{attrs:{items:e.availableSkiers,label:"Search user","item-text":"name","item-value":"name",clearable:""},model:{value:e.addUser,callback:function(t){e.addUser=t},expression:"addUser"}})],1),r("td",[e.addUser&&"string"!==typeof e.addUser?e._e():r("v-text-field",{attrs:{label:"Manual enter"},model:{value:e.addUser,callback:function(t){e.addUser=t},expression:"addUser"}})],1),r("td",[r("v-btn",{attrs:{color:"info"},on:{click:this.addUserToRace}},[e._v("Add")])],1)])])])]),r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{color:"info"},on:{click:e.updateCache}},[e._v("Syncronize offline cache and server")]),r("v-btn",{attrs:{color:"error"},on:{click:e.clearCache}},[e._v("Clear local cache")])],1),r("v-select",{attrs:{items:e.races,label:"Change race","item-text":"name","item-value":"_id"},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Name",required:""},model:{value:e.selectedRace.name,callback:function(t){e.$set(e.selectedRace,"name",t)},expression:"selectedRace.name"}})],1),r("v-flex",{attrs:{xs12:""}},[r("code",[e._v(e._s(e.selectedRace._id))])]),r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{color:"error"},on:{click:e.deleteRace}},[e._v("Delete race")]),r("v-btn",{attrs:{color:"success"},on:{click:e.newRace}},[e._v("New race")]),r("v-btn",{attrs:{color:"info"},on:{click:this.saveRace}},[e._v("Save")]),r("v-btn",{attrs:{color:"info"},on:{click:this.setCachedRace}},[e._v("Set race as offline race")])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.editDialog=!1}}},[e._v("Close")])],1)],1)],1)],1)],1)},s=[],c=(r("7514"),r("c5f6"),r("cebc")),i=(r("7f7f"),r("96cf"),r("3b8d")),u=(r("20d6"),r("8c4f")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-content",[r("v-container",{attrs:{fluid:""}},[e.loading?r("v-progress-linear",{attrs:{indeterminate:!0}}):e._e(),r("table",[r("tr",[r("th",[r("a",{on:{click:function(t){e.sort="nr"}}},[e._v("Startnr")])]),r("th",[r("a",{on:{click:function(t){e.sort="diff"}}},[e._v("Pos")])]),r("th",[r("a",{on:{click:function(t){e.sort="diff"}}},[e._v("Idealtid")])]),r("th",[e._v("Navn")]),r("th",[e._v("Status")]),r("th",[e._v("Runde 1")]),r("th",[e._v("Runde 2")]),r("th",[e._v("Start")]),r("th",[e._v("Runde")]),r("th",[e._v("MÃ¥l")]),r("th")]),e._l(e.skiers,function(t){return r("tr",{key:t._id,class:"state-"+t.state},[r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.startNumber,expression:"skier.startNumber"}],attrs:{type:"number"},domProps:{value:t.startNumber},on:{change:function(t){e.$emit("saveState")},input:function(r){r.target.composing||e.$set(t,"startNumber",r.target.value)}}})]),r("td",[e._v(e._s(t.position))]),r("td",[e._v(e._s(t.diff))]),r("td",[e._v(e._s(t.name))]),r("td",[r("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(r){e.next(t)}}},[e._v(e._s(e.stateText(t.state)))]),r("v-btn",{attrs:{small:"",flat:"",icon:""},on:{click:function(r){e.back(t)}}},[r("v-icon",[e._v("undo")])],1)],1),r("td",[e._v("\n              "+e._s(1==t.state?e.calculateSecs(t.startTime,e.now.valueOf()):t.r1)+"\n            ")]),r("td",[e._v("\n              "+e._s(2==t.state?e.calculateSecs(t.roundTime,e.now.valueOf()):t.r2)+"\n            ")]),r("td",[e._v(e._s(t.startTime?new Date(t.startTime).toLocaleTimeString():"-"))]),r("td",[e._v(e._s(t.roundTime?new Date(t.roundTime).toLocaleTimeString():"-"))]),r("td",[e._v(e._s(t.endTime?new Date(t.endTime).toLocaleTimeString():"-"))]),r("td",[r("v-btn",{attrs:{small:"",flat:"",icon:""},on:{click:function(r){e.remove(t)}}},[r("v-icon",[e._v("clear")])],1)],1)])})],2)],1)],1)],1)},d=[],l=r("e814"),f=r.n(l),m=(r("55dd"),r("ac6a"),{name:"Race",data:function(){return{loading:!1,now:new Date,sort:"nr"}},props:["racingSkiers"],mounted:function(){var e=this;window.setInterval(function(){e.now=new Date},333)},methods:{updatePositions:function(){var e=0,t=-1,r=0;this.racingSkiers.sort(function(e,t){return e.diff-t.diff}).forEach(function(n){var a=f()(n.diff);a===t?(r+=1,n.position=e):(e=e+r+1,r=0,n.position=e+r),t=a})},stateText:function(e){switch(e){case 0:return"Init";case 1:return"Startet";case 2:return"Runde";case 3:return"Ferdig"}},back:function(e){var t=(new Date).valueOf();e.state>0&&(e.state=e.state-1,this.updateTime(t,e))},next:function(e){var t=(new Date).valueOf();e.state<3&&(e.state=e.state+1,this.updateTime(t,e))},calculateSecs:function(e,t){return e&&t?Math.abs(Math.round((t-e)/1e3)).toLocaleString("en-US",{minimumIntegerDigits:3,useGrouping:!1}):"000"},updateStats:function(e){e.r1=this.calculateSecs(e.startTime,e.roundTime),e.r2=this.calculateSecs(e.roundTime,e.endTime),e.endTime&&e.roundTime&&e.startTime?e.diff=this.calculateSecs(e.endTime-e.roundTime,e.roundTime-e.startTime):e.diff="999"},updateTime:function(e,t){switch(t.state){case 0:t.startTime=null,t.roundTime=null,t.endTime=null;break;case 1:t.startTime=e,t.roundTime=null,t.endTime=null;break;case 2:t.roundTime=e,t.endTime=null;break;case 3:t.endTime=e;break;default:t.startTime=e;break}this.updateStats(t),this.updatePositions(),this.$emit("saveState")},remove:function(e){this.$emit("removeSkier",e)}},computed:{skiers:function(){return"nr"===this.sort?this.racingSkiers.sort(function(e,t){return e.startNumber-t.startNumber}):this.racingSkiers.sort(function(e,t){return e.diff-t.diff})}}}),h=m,v=(r("366c"),r("2877")),p=Object(v["a"])(h,o,d,!1,null,null,null);p.options.__file="Race.vue";var b=p.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-text-field",{attrs:{type:"text",label:"New user"},on:{change:e.addUser},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e.loading?r("v-progress-linear",{attrs:{indeterminate:!0}}):e._e(),r("table",e._l(e.users,function(t,n){return r("tr",{key:t.id,staticClass:"grid-item"},[r("td",[e._v(e._s(n))]),r("td",[r("span",[e._v(e._s(t.name))])]),r("td",[r("v-btn",{attrs:{color:"primary"},on:{click:function(r){e.deleteUser(t._id)}}},[e._v("Delete")])],1)])}),0)],1)},g=[],k=r("bc3a"),w=r.n(k),R=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.get("api/skiers").then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.post("api/skiers",t).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.delete("api/skiers/".concat(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.get("api/races").then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.post("api/races",t).then(function(e){return e.data._id}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.delete("api/races/".concat(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),T={getSkiers:R,createSkier:_,deleteSkier:x,getRaces:S,createRace:y,deleteRace:O},C={name:"Users",data:function(){return{users:null,name:name,loading:!1}},mounted:function(){this.getUsers()},methods:{deleteUser:function(e){var t=this;T.deleteSkier(e).then(function(){return t.getUsers()})},addUser:function(){var e=this;T.createSkier({name:this.name}).then(function(){e.name="",e.getUsers()})},getUsers:function(){var e=this;this.loading=!0,T.getSkiers().then(function(t){var r=t.data;e.users=r.sort(function(e,t){var r=e.name.toLowerCase(),n=t.name.toLowerCase();return r<n?-1:r>n?1:0}),e.loading=!1})}}},U=C,N=Object(v["a"])(U,j,g,!1,null,null,null);N.options.__file="Users.vue";var z=N.exports,D=r("c1df"),I=r.n(D),P=r("795b"),$=r.n(P),M=(r("5df3"),r("f499")),E=r.n(M),L=r("11c1"),A=r.n(L),J="ideal.skiers",q="ideal.races",G="ideal.currentrace",F=function(e,t){return window.localStorage.setItem(e,E()(t))},H=function(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):[]},B=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(window.localStorage.getItem(J)&&!t){e.next=8;break}return e.next=3,T.getSkiers();case 3:return r=e.sent,F(J,r),e.abrupt("return",r);case 8:return e.abrupt("return",H(J));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),K=[],Q=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=Object(c["a"])({},t,{_id:A.a.v1()}),K.push(r),e.next=4,B();case 4:return n=e.sent,n.push(r),F(J,n),e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),V=T.deleteSkier,W=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(window.localStorage.getItem(q)&&!t){e.next=8;break}return e.next=3,T.getRaces();case 3:return r=e.sent,F(q,r),e.abrupt("return",r);case 8:return e.abrupt("return",H(q));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function X(e){console.time("save cached race"),window.localStorage.setItem(G,E()(e)),console.timeEnd("save cached race")}var Y=Z()||{name:"Nytt renn",skiers:[]};function Z(){if(!Y){var e=window.localStorage.getItem(G);e&&(Y=JSON.parse(e))}return Y}function ee(){window.localStorage.removeItem(G)}var te=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=Z(),!r){e.next=6;break}return X(t),e.abrupt("return",t.id);case 6:return e.abrupt("return",T.createRace);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),re=T.deleteRace;function ne(){return ae.apply(this,arguments)}function ae(){return ae=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(K.length>0)){e.next=4;break}return e.next=3,$.a.all(K.map(function(e){return T.createSkier(e)}));case 3:K=[];case 4:return e.next=6,B(!0);case 6:return e.next=8,W(!0);case 8:case"end":return e.stop()}},e,this)})),ae.apply(this,arguments)}function se(){localStorage.removeItem(J),localStorage.removeItem(q),localStorage.removeItem(G)}var ce={getSkiers:B,createSkier:Q,deleteSkier:V,getRaces:W,createRace:te,deleteRace:re,updateCache:ne,setCachedRace:X,getCachedRace:Z,removedCachedRace:ee,clearCache:se},ie=new u["a"]({routes:[{path:"/",component:b},{path:"/users",component:z}]}),ue={name:"app",router:ie,data:function(){return{now:new Date,addUser:"",id:null,availableSkiers:[],cachedRace:null,races:[],editDialog:!1,startNumber:1}},mounted:function(){var e=this;this.getSkiers(),this.getRaces(),this.cachedRace=ce.getCachedRace(),window.setInterval(function(){e.now=new Date},333)},methods:{removeSkier:function(e){if(confirm("Sure you want to delete?")){var t=this.selectedRace.skiers.findIndex(function(t){return t._id===e._id});t>-1&&this.selectedRace.skiers.splice(t,1),ce.setCachedRace(this.selectedRace)}},saveCache:function(){ce.setCachedRace(this.selectedRace)},addUserToRace:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.addUser._id&&!this.addUser.name){e.next=4;break}this.selectedRace.skiers.push(Object(c["a"])({},this.addUser,{startNumber:this.startNumber,state:0})),e.next=7;break;case 4:if(!this.addUser){e.next=7;break}return e.next=7,ce.createSkier({name:this.addUser}).then(function(e){t.selectedRace.skiers.push(Object(c["a"])({},e,{startNumber:t.startNumber,state:0}))});case 7:this.startNumber=Number(this.startNumber)+1,this.addUser="",ce.setCachedRace(this.selectedRace);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateCache:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.updateCache();case 2:alert("Cache updated!");case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clearCache:function(){ce.clearCache(),alert("Cache cleared")},saveRace:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(c["a"])({},this.selectedRace),e.next=3,ce.createRace(t).then(function(e){r.id=e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),setCachedRace:function(){ce.setCachedRace(this.selectedRace)},saveRaceAndClose:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.saveRace();case 2:this.editDialog=!1;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteRace:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.deleteRace(this.selectedRace._id);case 2:return e.next=4,this.getRaces();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),newRace:function(){this.id=null},getSkiers:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.getSkiers().then(function(e){t.availableSkiers=e}).catch(function(e){return alert(e)});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getRaces:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.getRaces();case 2:t=e.sent,this.races=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},computed:{selectedRace:function(){var e=this;if(this.cachedRace)return this.cachedRace;var t=this.races.find(function(t){return t._id===e.id});return t||{_id:null,skiers:[],name:""}},formatDate:function(){return I()(this.now).format("HH:mm:ss")}}},oe=ue,de=(r("5c0b"),Object(v["a"])(oe,a,s,!1,null,null,null));de.options.__file="App.vue";var le=de.exports,fe=r("ce5b"),me=r.n(fe);r("bf40");n["default"].use(me.a),n["default"].use(u["a"]),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(le)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("5e27"),a=r.n(n);a.a},"5e27":function(e,t,r){},c23b:function(e,t,r){}});
//# sourceMappingURL=app.cf687777.js.map